# 第 3 章 深入 Agents 模式

## 3-1  制訂 Agent 需要遵守的規則

- [本節最後完成專案](https://github.com/FlagTech/F6722_ch03_1A2B_gui)

### Rules--專案的規範

- py-env.md 檔

    ```
    ---
    alwaysApply: true
    ---
    ## Python 環境建置

    使用 uv 管理 Python 環境
    - 必要時以 `uv init` 初始專案使用 Python 3.13
    - 套件均以 `uv add` 加入專案

    ## Windows 環境注意事項

    - Windows 中 Python 預設會以系統的編碼輸出文字，在繁體中文版會是 Big5，也就是 CP950 編碼，請特別留意
    ```

### 撰寫產品需求書（PRD）與規格書（Specification）

- PRD.md 檔

    ```
    # 1A2B 猜數字遊戲的 GUI 版本 Python 程式

    ## 產品需求

    - 4 位數 1A2B 猜數字遊戲，每個位數有個別大大的輸入框
    - 在單一輸入框輸入數字後要自動跳轉到下一個輸入框
    - 數字不能重複
    - 輸入 4 個數字後按 Enter 可送出猜測數字
    - 有歷史區可以顯示每次猜測的數字以及幾 A 幾 B 的結果
    - 幾 A 幾 B 要用不同顏色顯示
    - 單次遊戲最多猜測 10 次，猜測成功或是到達 10 次未猜出來都要顯示訊息
    - 要讓玩家隨時可以重新遊戲
    - 要有計時區顯示本次遊戲已經進行的時間，細到秒數。
    - 要有成績區顯示目前為止猜測成功的最少次數以及最快時間，這項資訊要儲存下來，即使關閉遊戲，重新啟動程式也能夠取得並顯示

    ## 介面設計

    - 介面配置如下：

        ```
        +------------------------+
        |        遊戲標題        |
        |                        |
        | +--------+  +--------+ |
        | | 計時區 |  | 成績區 | |
        | +--------+  +--------+ |
        |                        |
        | +--+  +--+  +--+  +--+ |
        | |  |  |  |  |  |  |  | |
        | +--+  +--+  +--+  +--+ |
        |                        |
        | +--------------------+ |
        | |                    | |
        | |       歷史區       | |
        | |                    | |
        | +--------------------+ |
        |                        |
        |      +----------+      |
        |      |  新遊戲  |      |
        |      +----------+      |
        +------------------------+
        ```
    - 配色：採用日本秋天楓葉色調，以扁平風格呈現

    ## 技術細節

    - 圖形化介面使用 pyside 套件
    - 記錄成績使用 JSON 檔
    ```

### 依據實作結果修改 PRD

輸入的提示內容：

```
幫我依照目前實作的成果，修正 @PRD.md 內容
```

## 3-2  先規劃再動作的規劃模式（Plan Mode）

- [本節實作結果範例專案](https://github.com/FlagTech/F6722_ch03_1A2B_web)

### AGENTS.md--簡化版的專案通用規則

- AGENTS.md 檔

    ```md
    # Python 環境建置

    使用 uv 管理 Python 環境
    - 以 `uv init` 初始專案使用 Python 3.13
    - 套件均以 `uv add` 加入專案
    - Python 程式檔均以 `uv run` 執行

    ## Windows 環境注意事項

    - Windows 中 Python 預設會以系統的編碼輸出文字，在繁體中文版會是 Big5，也就是 CP950 編碼，請特別留意
    ```

- PRD.md

    ```md
    # 1A2B 猜數字遊戲的 Web 版本 Python 程式

    ## 產品需求

    分成前端網頁與後端伺服器，前端網頁負責與玩家的互動，具備：

    - RWD，可適應不同裝置畫面
    - 4 位數 1A2B 猜數字遊戲，每個位數有個別大大的輸入框
    - 在單一輸入框輸入數字後要自動跳轉到下一個輸入框讓玩家輸入數字
    - 數字不能重複
    - 輸入 4 個數字後按 Enter 才送出猜測數字
    - 有歷史區可以顯示每次猜測的數字以及幾 A 幾 B 的結果
    - 幾 A 幾 B 要用不同顏色顯示
    - 單次遊戲最多猜測 10 次，猜測成功或是到達 10 次未猜出來都要顯示訊息
    - 要讓玩家隨時可以重新遊戲
    - 要有計時區顯示本次遊戲已經進行的時間，細到秒數。
    - 要有成績區顯示目前為止猜測成功的最少次數以及最快時間

    後端伺服器負責：
    - 開始遊戲時出題
    - 根據猜測數字回應幾 A 幾 B 的資訊
    - 儲存並提供遊戲成績資訊

    ## 網頁介面設計

    - 介面配置如下：

        ```
        +------------------------+
        |        遊戲標題        |
        |                        |
        | +--------+  +--------+ |
        | | 計時區 |  | 成績區 | |
        | +--------+  +--------+ |
        |                        |
        | +--+  +--+  +--+  +--+ |
        | |  |  |  |  |  |  |  | |
        | +--+  +--+  +--+  +--+ |
        |                        |
        | +--------------------+ |
        | |                    | |
        | |       歷史區       | |
        | |                    | |
        | +--------------------+ |
        |                        |
        |      +----------+      |
        |      |  新遊戲  |      |
        |      +----------+      |
        +------------------------+
        ```
    - 配色：採用日本秋天楓葉色調，以扁平風格呈現

    ## 技術細節

    - 前端網頁採用 Vanilla JS
    - 後端伺服器採用 FastAPI
    - 記錄成績使用 JSON 檔
    ```

## 3-3 使用平行 Agent 管理專案的不同版本

### 使用 Best-of-N 比較不同模型

輸入的提示：

```
網頁現在的背景是纯色，我想要描配日本秋天配色主题，鋪上淺淺的楓葉,讓整個背景更豐富
```

### 使用平行 Agent 臨時解問題/加新功能

輸入的提示：

```
把前端網頁改成冬日配色主題
```
