# 第 8 章 實戰演練：從 0 開始打造 PDF 翻譯器
- [範例 PDF 及專案](https://github.com/FlagTech/F6722_ch08_PDF_translator)

## 8-1 用簡單提示詞生成程式

### 用 Plan Mode 定義需求

- 輸入的提示內容：

```md
幫我製作一個 PDF 翻譯器的 app，包含以下要求：
1. 以 Python 製作

2. 盡可能支援多種語言翻譯成繁體中文

3. 使用 deep-translator 套件

4. 保留原始 PDF 的圖片、文字格式，盡可能讓翻譯後的 PDF 除了語言都接近原始的版本

5. 使用pyside製作製作簡單的GUI,日本秋天楓葉色調配色方案(扁平風格)
```


## 8-2 從舊專案生成新版規格書（Spec）

### 第一步：生成規格書（Spec）

- 在上一節的專案輸入的提示內容：

```md
請基於以下原則，生成一份「新版PDF翻譯器」的完整Spec（規格說明）：  
保留核心流程：PDF解析、文字翻譯、結果輸出、基本GUI操作和完整佈景

新版Spec應主動簡化需求，允許與舊版行為不同，只要更穩定、更可維護  
清楚定義模組邊界、資料流與錯誤處理責任  
明確定義第一版刻意不做的事情，避免隱性需求  
Spec可直接用於後續的SDD與實作階段

```

### 第二步：依照規格書逐步實作

```md
請依照 SPEC，開始為這個模組補上完整實作。  
要求：

- 嚴格遵守 SPEC 的方法、參數、資料流
    
- 僅在這個檔案內實作功能
    
- 保持程式碼乾淨、可讀
    
- 出問題要顯示例外訊息
    
- 不要變更架構
    

完成一個模組後請停止，等我說下一個。 

```


### 第三步：讓 Cursor 自動進行**整合測試**並修正所有問題：

```md
請分析整個專案，檢查所有模組之間的整合問題，包括：

- import 錯誤

- class 或方法名稱不一致

- 參數未對齊

- 路徑錯誤

- 資料流不符合 SPEC

請自動修正所有問題，必要時同步更新多個檔案。 

完成後告訴我你修了哪些地方。
```


### 測試驗證 project rule  (PDF Translator Verification)

```
在修改任何翻譯、PDF 處理、字體、Emoji 或輸出相關程式碼之前，請先完成以下步驟，且必須依序執行：

第一步：建立自動驗證流程

固定使用 Tokyo Travel Guide.pdf 作為測試輸入

每次翻譯後，自動執行驗證檢查

驗證至少包含：

抽取第 1、3 頁的所有文字內容

確認翻譯後文字中仍包含完整的繁體中文字

不可出現問號、缺字或被替換的字元

確認原始文件中的 Emoji 在輸出 PDF 中仍存在

允許以文字或圖片形式存在

不允許消失或顯示為亂碼


第二步：輸出驗證報告

每次驗證都必須輸出一份清楚的檢查結果

每一項檢查必須標示為 PASS 或 FAIL

若為 FAIL，必須明確指出：

發生頁碼

問題類型（缺字、問號、Emoji 遺失等）


第三步：行為限制

在驗證流程尚未建立完成前，禁止修改任何翻譯或 PDF 生成邏輯

若驗證結果為 FAIL，只允許修改與該失敗項目直接相關的最小範圍程式碼

每次修改後，必須重新完整執行驗證流程並輸出新的報告

在所有驗證項目皆為 PASS 之前，不得宣告問題已修復

第四步：完成條件

僅當所有驗證項目連續通過時，才可視為問題已修好

驗證流程必須保留，作為後續修改的回歸檢查
```
